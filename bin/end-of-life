#!/usr/bin/env php
<?php

use Cyrosy\PhpEndOfLife\PhpEndOfLife;

$locations = [
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../vendor/autoload.php',
];

$loaded = false;

foreach ($locations as $location) {
    if (is_file($location)) {
        require_once($location);
        $loaded = true;
        break;
    }
}

if (! $loaded) {
    fwrite(STDERR, 'Unknown Autoload File Location');
    exit(254);
}

$version = phpversion();

if ($argc > 2) {
    fwrite(STDERR,
        "PHP End of Life\n"
        . "Expose PHP EOL Life Date and Check if Version is Supported\n\n"
        . "Usage:\n"
        . ' ' . $argv[0] . "\n"
        . ' ' . $argv[0] . " 1.0.0\n"
        . ' ' . $argv[0] . " help\n"
    );
}

if (! PhpEndOfLife::isSupported($version)) {
    exit(1);
}
